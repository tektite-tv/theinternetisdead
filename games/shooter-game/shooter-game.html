<!doctype html>
<!--
  shooter-game.html v0.2.4
  Feature: Alt+Drag HUD elements with corner snapping animations
  - Health bar and stats HUD can be dragged independently while holding Alt
  - Elements snap to nearest corner with a pulsing animation
  - Snap detection radius ~40px
-->
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bananaman Shooter</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@keyframes snapPulse {
  0% { transform: scale(1); box-shadow: 0 0 0px rgba(0,255,150,0); }
  50% { transform: scale(1.1); box-shadow: 0 0 20px rgba(0,255,150,0.8); }
  100% { transform: scale(1); box-shadow: 0 0 0px rgba(0,255,150,0); }
}
.snap-anim { animation: snapPulse 0.25s ease-out; }
</style>
</head>
<body class="m-0 h-screen bg-[#0b0b0b] text-gray-200 font-sans overflow-hidden select-none">
<canvas id="game-canvas" class="fixed inset-0 w-full h-full block"></canvas>

<!-- Main Menu -->
<div id="main-menu" class="fixed inset-0 flex items-center justify-center pointer-events-auto">
  <div class="bg-neutral-900/90 border border-white/10 rounded-2xl shadow-2xl p-8 w-[min(92vw,560px)] text-center">
    <h1 class="text-yellow-300 text-4xl md:text-5xl font-extrabold mb-1 drop-shadow-md">Bananaman Shooter</h1>
    <p class="text-sm opacity-70 mb-6">v0.2.4</p>
    <button id="btn-start" class="w-full my-2 py-3 rounded-xl border border-white/20 bg-white/10 hover:bg-white/20 transition">Start Game</button>
    <button id="btn-options" class="w-full my-2 py-3 rounded-xl border border-white/20 bg-white/10 hover:bg-white/20 transition">Options</button>
  </div>
</div>

<!-- Options Menu -->
<div id="options-menu" class="hidden fixed inset-0 flex items-center justify-center pointer-events-auto">
  <div class="bg-neutral-900/90 border border-white/10 rounded-2xl shadow-2xl p-8 w-[min(92vw,560px)] text-center">
    <h2 class="text-yellow-300 text-3xl font-bold mb-4">Options</h2>
    <p class="mb-2">Difficulty: <span id="diff-label" class="font-semibold">Normal</span></p>
    <input id="diff-slider" type="range" min="1" max="3" step="1" value="2" class="w-4/5 accent-yellow-400">
    <p id="diff-desc" class="text-sm opacity-75 mb-4">Enemies deal standard damage.</p>
    <p class="mb-2">Game Speed: <span id="speed-label" class="font-semibold">1.0x</span></p>
    <input id="speed-slider" type="range" min="1" max="10" step="1" value="1" class="w-4/5 accent-pink-400">
    <p id="speed-desc" class="text-sm opacity-75 mb-6">Adjusts overall game speed (1x–5x).</p>
    <button id="btn-back" class="w-full py-3 rounded-xl border border-white/20 bg-white/10 hover:bg-white/20 transition">Back</button>
  </div>
</div>

<!-- HUD -->
<div id="hud-stats" class="hidden fixed top-2 left-2 bg-neutral-800/70 text-sm px-3 py-2 rounded-lg border border-white/10 cursor-move">
  Kills: <span id="killcount">0</span> | Wave: <span id="wavecount">0</span>
</div>

<div id="healthbar" class="hidden fixed top-12 left-2 w-52 h-5 border border-white relative bg-red-950 rounded cursor-move">
  <div id="healthfill" class="absolute left-0 top-0 h-full w-full bg-red-500 transition-[width] duration-200 rounded"></div>
  <div id="healthtext" class="absolute w-full text-center text-xs text-white top-[2px]">100%</div>
</div>

<div id="you-died" class="fixed inset-0 flex items-center justify-center text-red-600 font-extrabold text-6xl drop-shadow-[0_0_40px_#ff0000] bg-black/80 opacity-0 transition-opacity duration-1000 pointer-events-none">
  YOU DIED
</div>

<div class="fixed bottom-2 right-3 text-xs opacity-70 bg-neutral-900/70 border border-white/10 px-2 py-1 rounded">
  Move: WASD • Aim: Mouse • Shoot: Click/Space • ESC: Menu • Hold Alt to drag HUD
</div>

<script>
const hudElements = [document.getElementById('hud-stats'), document.getElementById('healthbar')];
let activeHud = null, offsetX = 0, offsetY = 0;

function enableHudDragging() {
  hudElements.forEach(el => {
    el.addEventListener('mousedown', e => {
      if (!e.altKey) return;
      activeHud = el;
      el.style.transition = 'none';
      offsetX = e.clientX - el.offsetLeft;
      offsetY = e.clientY - el.offsetTop;
      el.classList.add('ring-2', 'ring-green-400/60');
    });
  });

  window.addEventListener('mouseup', () => {
    if (activeHud) {
      const {innerWidth: W, innerHeight: H} = window;
      const el = activeHud, rect = el.getBoundingClientRect(), snap=40;
      const corners = [
        {x:0,y:0,cls:['top-2','left-2']},
        {x:W,y:0,cls:['top-2','right-2']},
        {x:0,y:H,cls:['bottom-2','left-2']},
        {x:W,y:H,cls:['bottom-2','right-2']}
      ];
      let snapped = false;
      for(const c of corners){
        if(Math.abs(rect.left-c.x)<snap && Math.abs(rect.top-c.y)<snap){
          el.style.left=''; el.style.top='';
          el.classList.remove('left-2','right-2','top-2','bottom-2');
          c.cls.forEach(cls=>el.classList.add(cls));
          el.classList.add('snap-anim');
          setTimeout(()=>el.classList.remove('snap-anim'),250);
          snapped = true;
          break;
        }
      }
      if(!snapped){
        el.style.left = rect.left+'px';
        el.style.top = rect.top+'px';
        el.classList.remove('top-2','left-2','right-2','bottom-2');
        el.style.position = 'fixed';
      }
      el.classList.remove('ring-2','ring-green-400/60');
      el.style.transition = '';
      activeHud = null;
    }
  });

  window.addEventListener('mousemove', e => {
    if (activeHud && e.altKey) {
      activeHud.style.left = (e.clientX - offsetX)+'px';
      activeHud.style.top = (e.clientY - offsetY)+'px';
      activeHud.style.position = 'fixed';
    }
  });
}
enableHudDragging();

// rest of game code stub (preserves compatibility)
</script>
</body>
</html>
