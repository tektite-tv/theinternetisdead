<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>theinternetisdead.org - Home</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="icon" type="image/png" href="/images/face.png">
  <style>
  /* GLOBAL RESET AND BASE --------------------------------- */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Courier New", monospace;
  }

  html, body {
    height: 100%;
    background-color: #000;
    color: #ddd;
    overflow-y: auto;
  }

  a { color: inherit; text-decoration: none; }

  /* HEADER / TASKBAR -------------------------------------- */
  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #1a0033;
    color: #fff;
    padding: 16px 32px;
    border-bottom: 3px solid #cc181e;
    position: sticky;
    top: 0;
    z-index: 10;
  }

  .submit-btn {
    display: inline-block;
    padding: 8px 20px;
    background: rgba(0, 0, 0, 0.85);
    border: 2px solid #0f0;
    color: #0f0;
    font-family: "Courier New", monospace;
    font-size: 14px;
    border-radius: 6px;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-decoration: none;
    transition: all 0.25s ease-in-out;
    box-shadow: 0 0 8px rgba(0, 255, 0, 0.3);
  }

  .submit-btn:hover {
    background: #0f0;
    color: #000;
    box-shadow: 0 0 18px rgba(0, 255, 0, 0.6);
    transform: scale(1.05);
  }

  .left-section, .right-section {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .menu {
    cursor: pointer;
    font-size: 26px;
    font-weight: bold;
    background: none;
    border: none;
    color: #fff;
  }

  .logo { height: 36px; width: auto; }

  .search-bar {
    flex: 1;
    max-width: 600px;
    display: flex;
    align-items: center;
    margin: 0 24px;
  }

  .search-bar input {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid #444;
    border-right: none;
    background: #000;
    color: #fff;
  }

  .search-bar button {
    padding: 8px 16px;
    border: 1px solid #444;
    background-color: #222;
    color: #fff;
    cursor: pointer;
    transition: background 0.2s;
  }
  .search-bar button:hover { background-color: #333; }

  /* MAIN CONTENT LAYOUT ----------------------------------- */
  main {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    padding: 32px;
    background: #000;
    align-items: start;
    position: relative;
    overflow: hidden;
  }

  /* Animated bright green diagonal scanlines */
  main::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      135deg,
      rgba(0, 255, 153, 0.18) 0px,
      rgba(0, 255, 153, 0.18) 3px,
      rgba(0, 255, 153, 0.02) 3px,
      rgba(0, 255, 153, 0.02) 12px
    );
    animation: scan-drift 60s linear infinite; /* slower, gentle drift */
    pointer-events: none;
    z-index: 0;
    filter: brightness(1.2);
  }

  @keyframes scan-drift {
    from { background-position: 0 0; }
    to { background-position: 600px 600px; }
  }

  .column {
    background: #0a0a0a;
    padding: 20px;
    border: 1px solid #222;
    border-radius: 6px;
    box-shadow: 0 0 10px rgba(255,255,255,0.05);
    position: relative;
    z-index: 1;
  }

  h1 {
    font-size: 1.8em;
    font-weight: bold;
    text-align: center;
    text-shadow: 0 0 6px #fff2, 0 0 12px #0ff4;
    margin-bottom: 8px;
  }

  h2 {
    text-align: center;
    color: #888;
    font-weight: normal;
    margin-bottom: 20px;
  }

  .post { margin-bottom: 28px; border-bottom: 1px dashed #333; padding-bottom: 14px; }
  .post h3 { color: #00ff99; margin-bottom: 6px; }
  .post small { color: #888; display: block; margin-bottom: 8px; }

  iframe {
    width: 100%;
    aspect-ratio: 16 / 9;
    border: none;
    border-radius: 6px;
    margin-bottom: 8px;
  }

  @media (max-width: 1100px) {
    main { grid-template-columns: 1fr; }
  }

  .footer {
    text-align: center;
    margin-top: 40px;
    color: #ccc;
  }
  </style>
</head>

<body>
  <header>
    <div class="left-section">
      <button class="menu">&#9776;</button>
      <a href="index.html">
        <img class="logo" src="/images/oldtube.png" alt="OldTube Logo" />
        <span style="color:#00ff99; font-size:14px;">The webmaster is not harvesting your soul for profit. Isn't that wonderful?</span>
      </a>
    </div>

    <div class="search-bar">
      <input type="text" class="search-input" placeholder="Search posts and videos..." />
      <button class="search-btn">Search</button>
    </div>

    <div class="right-section">
      <a href="mailto:nobody@theinternetisdead.org" class="submit-btn">Submit</a>
    </div>
  </header>

  <main>
    <section class="column" id="posts">
      <h1 style="color:#00ff99;">ðŸŒ€ The Daily Spiral</h1>
      <h2>Latest Posts</h2>
      <p>Loading posts...</p>
    </section>

    <section class="column" id="youtube">
      <h1 style="color:#66ccff;">My Latest Broadcast</h1>
      <h2>Latest Videos</h2>
      <p>Loading videos...</p>
    </section>
  </main>

  <div class="footer">
    Thank you for browsing <a href="https://theinternetisdead.org/">theinternetisdead.org</a> â€¢ Copyright 2025 for Eternity by <a href="https://youtube.com/@Honestly_Thomas">Thomas Harrison</a>
  </div>

  <script>
  async function loadContent() {
    const postsContainer = document.getElementById("posts");
    const youtubeContainer = document.getElementById("youtube");

    let allPosts = [];
    let visiblePosts = 3;
    let allVideos = [];
    let visibleVideos = 3;

    // === Load Posts ===
    try {
      const res = await fetch("/_posts/index.json");
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      allPosts = await res.json();
      allPosts.sort((a, b) => new Date(b.date) - new Date(a.date));
      renderPosts();
    } catch (err) {
      console.error("Post load failed:", err);
      postsContainer.innerHTML += `<p style="color:red;">Error loading posts: ${err.message}</p>`;
    }

    async function renderPosts() {
      postsContainer.innerHTML = `<h1 style="color:#00ff99;">ðŸŒ€ The Daily Spiral</h1><h2>Latest Posts</h2>`;
      const displayed = allPosts.slice(0, visiblePosts);
      for (const p of displayed) {
        const wrapper = document.createElement("div");
        wrapper.className = "post";
        wrapper.innerHTML = `
          <h3>${p.title}</h3>
          <small>${new Date(p.date).toLocaleString()}</small>
          ${p.image ? `<img src="${p.image}" alt="${p.title}" loading="lazy">` : ""}
          <div class="content"><em>Loading...</em></div>
        `;
        postsContainer.appendChild(wrapper);
        try {
          const res = await fetch(p.file);
          let text = await res.text();
          if (text.startsWith('---')) {
            const end = text.indexOf('---', 3);
            if (end !== -1) text = text.slice(end + 3);
          }
          wrapper.querySelector(".content").innerHTML = marked.parse(text.trim());
        } catch {
          wrapper.querySelector(".content").innerHTML = "<em>Unable to load post content.</em>";
        }
      }
      if (visiblePosts < allPosts.length) {
        const btn = document.createElement("button");
        btn.className = "submit-btn";
        btn.textContent = "Read More";
        btn.onclick = () => { visiblePosts += 3; renderPosts(); };
        postsContainer.appendChild(btn);
      }
    }

    // === Load YouTube ===
    try {
      const feedUrl = "https://www.youtube.com/feeds/videos.xml?channel_id=UCn3WLZT7k8nO24XimlJVJVQ";
      const rssRes = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`);
      const rssData = await rssRes.json();
      allVideos = rssData.items || [];
      renderVideos();
    } catch (err) {
      console.error("Video load failed:", err);
      youtubeContainer.innerHTML += `<p style="color:red;">Error loading videos: ${err.message}</p>`;
    }

    function renderVideos() {
      const displayed = allVideos.slice(0, visibleVideos);
      youtubeContainer.innerHTML = `<h1 style="color:#66ccff;">My Latest Broadcast</h1><h2>Latest Videos</h2>`;
      for (const v of displayed) {
        const id = v.guid?.split(":").pop() || "";
        youtubeContainer.innerHTML += `
          <div class="video">
            <iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>
            <a href="${v.link}" target="_blank">${v.title}</a>
          </div>`;
      }
      if (visibleVideos < allVideos.length) {
        const btn = document.createElement("button");
        btn.className = "submit-btn";
        btn.textContent = "Watch More";
        btn.onclick = () => { visibleVideos += 3; renderVideos(); };
        youtubeContainer.appendChild(btn);
      }
      youtubeContainer.innerHTML += `<a href="https://www.youtube.com/channel/UCn3WLZT7k8nO24XimlJVJVQ" target="_blank" class="submit-btn" style="margin-top:10px;">Watch on YouTube</a>`;
    }
  }

  document.addEventListener("DOMContentLoaded", loadContent);
  </script>
</body>
</html>
