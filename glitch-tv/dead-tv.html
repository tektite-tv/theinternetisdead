<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DeadTV</title>
<style>
  :root {
    --period: 4px;
    --line-color: hsla(0,0%,100%,0.9);
    --angle: 0deg;
    --bgx: 0px;
    --bgy: 0px;
    --skx: 0deg;
    --sky: 0deg;
    --sc: 1;
  }

  html, body {
    height: 100%;
    margin: 0;
    background: #000;
    color: #eee;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    overflow: hidden;
  }

  .app { position: relative; height: 100%; width: 100%; overflow: hidden; }

  canvas#lava { position: absolute; inset: 0; width: 100%; height: 100%; display: block; z-index: 0; }

  .layers { position: absolute; inset: 0; display: grid; place-items: center; pointer-events: none; z-index: 1; transition: filter 80ms linear; }
  .layers.invert { filter: invert(1); }

  .vertical, .horizontal { background-position: var(--bgx) var(--bgy); }
  .vertical {
    position: absolute; inset: 0;
    background: repeating-linear-gradient(90deg, var(--line-color) 0 1px, transparent 1px var(--period));
    mix-blend-mode: screen;
  }
  .horizontal-wrap {
    position: absolute; inset: 0; display: grid; place-items: center;
    transform: rotate(var(--angle)) skewX(var(--skx)) skewY(var(--sky)) scale(var(--sc));
    transform-origin: 50% 50%;
    will-change: transform;
  }
  .horizontal {
    position: absolute; inset: 0;
    background: repeating-linear-gradient(0deg, var(--line-color) 0 1px, transparent 1px var(--period));
    mix-blend-mode: screen;
  }

  .controls {
    position: absolute;
    left: 50%;
    bottom: 16px;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.65);
    border: 1px solid rgba(255,255,255,0.25);
    border-radius: 12px;
    padding: 10px 14px;
    backdrop-filter: blur(6px);
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 10;
    user-select: none;
    flex-wrap: wrap;
    max-width: min(94vw, 1200px);
  }
  .controls label { font-size: 14px; display: flex; gap: 8px; align-items: center; white-space: nowrap; }
  .controls input[type="range"] { width: min(40vw, 360px); accent-color: #fff; }
  .value { font-variant-numeric: tabular-nums; min-width: 62px; text-align: right; opacity: 0.9; }

  .btn {
    pointer-events: auto;
    background: rgba(30,30,35,0.85);
    border: 1px solid rgba(255,255,255,0.25);
    color: #eee; padding: 6px 10px; border-radius: 10px;
    font-size: 13px; cursor: pointer;
    transition: transform .06s ease, background .2s ease, border-color .2s ease;
  }
  .btn:hover { transform: translateY(-1px); }

  @media (max-width: 768px) {
    #main-content { height: 100dvh; }
    #main-iframe { height: 100dvh; }
  }
</style>
</head>
<body>
  <div class="app">
    <canvas id="lava"></canvas>
    <div class="layers" id="layerRoot">
      <div class="vertical"></div>
      <div class="horizontal-wrap" id="hwrap">
        <div class="horizontal"></div>
      </div>
    </div>

    <form class="controls" id="controlsDesktop" onsubmit="return false" aria-label="Controls">
      <label for="angle">
        Rotate:
        <input id="angle" type="range" min="-45" max="45" step="0.1" value="0" />
      </label>
      <div class="value" id="angleVal">0.0¬∞</div>
      <div class="spacer"></div>
      <button type="button" class="btn" id="spinOnce">Spin 360¬∞</button>
      <button type="button" class="btn" id="spinLoop" aria-pressed="false">Spin Loop</button>
      <button type="button" class="btn" id="pulse" aria-pressed="false">Pulse Lines</button>
      <button type="button" class="btn" id="strobe" aria-pressed="false">Strobe Glitch</button>
      <button type="button" class="btn" id="cycle" aria-pressed="false">Cycle Line Color</button>
      <button type="button" class="btn" id="meltdown" aria-pressed="false">Meltdown Warp</button>
      <button type="button" class="btn" id="stop">Stop</button>
      <button type="button" class="btn" id="drawMode" aria-pressed="false">üñçÔ∏è Draw Mode</button>
      <button type="button" class="btn" id="saveShot" title="Save Screenshot">üíæ Save</button>
    </form>
  </div>

<script src="/glitch-tv/dead-tv.js"></script>
</body>
</html>
